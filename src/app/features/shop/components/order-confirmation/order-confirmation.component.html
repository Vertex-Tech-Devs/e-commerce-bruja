<div class="confirmation-container">
  @if (order$ | async; as order) {
    <div class="confirmation-card">
      <div class="icon-success">
        <i class="bi bi-check-circle-fill"></i>
      </div>
      <h1 class="thank-you-title">¡Gracias por tu compra, {{ order.clientName.split(' ')[0] }}!</h1>
      <p class="subtitle">Hemos recibido tu pedido y ya lo estamos preparando.</p>

      <div class="order-summary">
        <h2 class="summary-title">Resumen de tu Pedido</h2>
        <p class="order-id">
          <strong>Número de Pedido:</strong> {{ order.id }}
        </p>
        @for (item of order.items; track item.productId) {
          <div class="summary-item">
            <span class="item-name">{{ item.productName }} (x{{ item.quantity }})</span>
            <span class="item-price">{{ item.price * item.quantity | currency:'ARS':'$' }}</span>
          </div>
        }
        <div class="summary-total">
          <strong>Total Pagado:</strong>
          <strong>{{ order.total | currency:'ARS':'$' }}</strong>
        </div>
      </div>

      <p class="email-info">Te hemos enviado un correo de confirmación a <strong>{{ order.clientEmail }}</strong> con los detalles de tu compra.</p>

      <a routerLink="/shop/catalog" class="action-button">Seguir Comprando</a>
    </div>
  } @else {
    <div class="loading-card">
      <div class="spinner-border text-primary" role="status">
        <span class="visually-hidden">Cargando...</span>
      </div>
      <p class="mt-3">Cargando los detalles de tu pedido...</p>
    </div>
  }
</div>
